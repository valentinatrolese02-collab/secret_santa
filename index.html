<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <title>Secret MTR</title>

    <!-- Font natalizio da Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
    <style>
        body {
            font-family: 'Mountains of Christmas', cursive;
            background-color: #0b1e3d; /* blu notte */
            color: #fff;
            margin: 0;
            padding: 0;
        }
        #snow {
            position: fixed;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        #wrapper {
            position: relative;
            z-index: 1; /* sopra la neve */
            padding: 20px;
            max-width: 600px;
            margin: auto;
            text-align: center;
        }
        header#header img {
            border-radius: 10px;
            margin-top: 15px;
            max-width: 100%;
            height: auto;
        }
        section#main ul {
            list-style: none;
            padding-left: 0;
        }
        section#main ul li {
            margin: 10px 0;
        }
        section#main ul li a {
            color: #ffd700;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2em;
            transition: color 0.3s ease;
        }
        section#main ul li a:hover {
            color: #fff;
            text-shadow: 0 0 5px #ffd700;
        }
        footer#footer {
            margin-top: 40px;
            font-size: 0.9em;
            color: #ccc;
        }
    </style>
</head>
<body class="is-preload">
    <canvas id="snow"></canvas>

    <div id="wrapper">
        <header id="header">
            <h1>Ciao sgualdrina!</h1>
            <img src="{{ url_for('static', filename='intro.jpg') }}" width="300" alt="Intro" />
            <p>
                Clicca sul TUO nome per scoprire a quale MTR chi devi fare il regalo.<br /><br />
                <strong>Regole:</strong><br />
                Budget soldi – 15 sbleuri. (Baratto paga di più perché si succhia gli alluci)<br />
                Budget amore – infinito.<br /><br />
                Big reveal: 25 Dicembre a casa Vale, outfit gala.
            </p>
        </header>

        <section id="main">
            <ul>
                {% for name, token in links %}
                    <li><a href="{{ url_for('secret', token=token) }}">{{ name }}</a></li>
                {% endfor %}
            </ul>
        </section>

        <footer id="footer">
            <p>&copy; Secret MTR 2025. Powered by Flask & Amore.</p>
        </footer>
    </div>

    <script>
        const canvas = document.getElementById('snow');
        const ctx = canvas.getContext('2d');
        let width, height;
        let snowflakes = [];

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        window.addEventListener('resize', resize);
        resize();

        function createSnowflakes() {
            for (let i = 0; i < 100; i++) {
                snowflakes.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: Math.random() * 4 + 1,
                    d: Math.random() * 1,
                });
            }
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.beginPath();
            for (let i = 0; i < snowflakes.length; i++) {
                let f = snowflakes[i];
                ctx.moveTo(f.x, f.y);
                ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
            }
            ctx.fill();
            update();
        }

        let angle = 0;

        function update() {
            angle += 0.01;
            for (let i = 0; i < snowflakes.length; i++) {
                let f = snowflakes[i];
                f.y += Math.cos(angle + f.d) + 1 + f.r / 2;
                f.x += Math.sin(angle) * 2;

                if (f.y > height) {
                    snowflakes[i] = { x: Math.random() * width, y: 0, r: f.r, d: f.d };
                }
            }
        }

        createSnowflakes();
        setInterval(draw, 33);
    </script>

</body>
</html>
